# Hash_Table

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ 
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã, —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è—é—Ç—Å—è —Å–ª–æ–≤–∞ –∏–∑ —Ç–µ–∫—Å—Ç–∞. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü—É –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞, –∞ –∑–∞—Ç–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏–µ –≥–æ—Ä—è—á–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–≤ –∏ —É–ª—É—á—à–∏—Ç—å –≥–æ—Ä—è—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–º—è —Å–ø–æ—Å–æ–±–∞–º–∏: –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏, –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–∞–º–∏ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

## –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã 

```c
struct ListNode {
    char key[32];
    ListNode* next;
};

struct HashTable {
    ListNode** buckets;
    size_t size;      
    size_t count;     
};
```
–ò—Ç–∞–∫, –Ω–∞ –≤—Ö–æ–¥ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–µ –ø–æ–¥–∞—ë—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ, –∑–∞—Ç–µ–º –Ω–µ–∫–æ—Ç–æ—Ä–∞—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ç–æ–º—É —Å–ª–æ–≤—É —Ö–µ—à-–∫–æ–¥, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ª–æ–≤—É –±–∞–∫–µ—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω–∞–¥–æ –∏—Å–∫–∞—Ç—å —Å–ª–æ–≤–æ –Ω–µ —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞, –∞ —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ —Å–ª–æ–≤ –¥–∞–Ω–Ω–æ–≥–æ –±–∞–∫–µ—Ç–∞. –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ load-—Ñ–∞–∫—Ç–æ—Ä —Å—Ç–∞—Ä–∞—é—Ç—Å—è –¥–µ–ª–∞—Ç—å –æ–∫–æ–ª–æ –¥–≤—É—Ö - –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∏ —Å–ø–∏—Å–æ–∫ –Ω–µ –Ω—É–∂–µ–Ω - –Ω–æ –º—ã –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö —Å–¥–µ–ª–∞–µ–º –µ–≥–æ –æ–∫–æ–ª–æ 20.

–ù–∞ –≤—Ö–æ–¥ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—ã –ø–æ–¥–∞–¥–∏–º —Ñ–∞–π–ª , —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ 638304 —Å–ª–æ–≤.

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã
<details>
  <summary>üìä –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã</summary>
  
  <img src=https://github.com/Arseny-Dernovich/Hash_Table/blob/main/Photos_for_README/%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B.png>
</details>


### –ü—Ä–æ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã 
–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏ —Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–∫—Ç–æ–≤, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤—ã–ø–æ–ª–Ω–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø–æ —è–¥—Ä–∞–º:

```
$ sudo cpupower frequency-set -u 3000MHz    # –≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞
$ sudo cpupower frequency-set -d 3000MHz    #  –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞
```

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å makefile

```make```

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏  –≤–µ—Ä—Å–∏–∏ —Å –ø–µ—Ä–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å makefile

``` make -f Makefile_hash1```

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏  –≤–µ—Ä—Å–∏–∏ —Å –¥–≤—É–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å makefile

``` make -f Makefile_hash2```

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏  –≤–µ—Ä—Å–∏–∏ —Å —Ç—Ä–µ–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å makefile

``` make -f Makefile_hash3```

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã
–Ø –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º—É –∫–æ—Ç–æ—Ä–∞—è –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–æ–≤–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—É –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –∏—Ö –ø–æ–∏—Å–∫–∞ –ø–æ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ.
–û—Ü–µ–Ω–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—É–¥–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∫–∞–∑–∞–Ω–∏–π —Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é *rdtsc()*.–í—Å–µ –≤–µ—Ä—Å–∏–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —Å —Ñ–ª–∞–≥–æ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ```-O3```

# –û–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è—Ö 
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ —Ä–∞–∑. –í IT-–∫–æ–º–ø–∞–Ω–∏—è—Ö –∏–¥—ë—Ç –±–æ—Ä—å–±–∞ –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–∞–∂–µ 0.5% , –Ω–æ –º—ã –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –ø—Ä–æ–≤–µ–¥—ë–º –≤—Å–µ–≥–æ —Ç—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.


<details>
<summary>üîß –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–¥ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</summary>

```c
uint64_t start = rdtsc();  
HashTable_InsertFromFile(&table, "words.txt");

HashTable_FindWords(&table, words_to_find, search_word_count);
uint64_t end = rdtsc();
printf("\nTicks1: %lu\n\n", end - start);
```
</details>

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ —Ç–∞–∫—Ç–æ–≤ —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ:

| –ó–∞–ø—É—Å–∫ | –ö–æ–ª-–≤–æ —Ç–∞–∫—Ç–æ–≤ |
|--------|----------------|
| 1      | 279910812      |
| 2      | 321893206      |
| 3      | 262208468      |
| 4      | 272406996      |
| 5      | 265597020      |
| 6      | 259460240      |
| 7      | 288451576      |
| 8      | 283575278      |
| 9      | 271806814      |
| 10     | 289316656      |
| 11     | 271308222      |
| 12     | 274215818      |

**–°—Ä–µ–¥–Ω–µ–µ:** ~277.5 –º–ª–Ω —Ç–∞–∫—Ç–æ–≤

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:** ¬±16,002,294 —Ç–∞–∫—Ç–æ–≤

## –ê–Ω–∞–ª–∏–∑ –≥–æ—Ä—è—á–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π 
–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–æ—Ä—è—á–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –±—É–¥–µ–º —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∞ *perf*. 

![Github](https://github.com/Arseny-Dernovich/Hash_Table/blob/main/Photos_for_README/hash_0.png)

–û—Ç—Å—é–¥–∞ –≤–∏–¥–Ω–æ , —á—Ç–æ —Å–∞–º–æ–π –≥–æ—Ä—è—á–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π —è–≤–ª—è–µ—Ç—Å—è *__random()*. –û–Ω–∞ —É –º–µ–Ω—è –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ.
<details>
<summary>  –ö–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö —Å–ª–æ–≤ </summary>

```c
char* GenerateRandomWord (size_t length)
{
    static const char alphanum[] = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    size_t alphanum_size = sizeof (alphanum) - 1;

    char* word = (char*)calloc (length + 1 , 1);
    for (size_t i = 0; i < length; ++i) {

        int rand_index = rand () % alphanum_size;
        word[i] = alphanum[rand_index];
    }
    word[length] = '\0';
        
    return word;    
}
```
</details>

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è rand()
–§—É–Ω–∫—Ü–∏—è rand() —Ç–∞–∫ —Å–∏–ª—å–Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è , —Ç.–∫. –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ó–∞–º–µ–Ω–∏–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é rand()  –Ω–∞ fast_rand() —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–æ–≤.–í fast_rand() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è  Xorshift –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª,–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø–æ–±–∏—Ç–æ–≤—ã—Ö —Å–¥–≤–∏–≥–∞—Ö –∏ –ø–æ–±–∏—Ç–æ–≤—ã—Ö XOR –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.

```c
__m128i xorshift128 (__m128i state) 
{
    __m128i tmp = state;
    tmp = _mm_xor_si128 (tmp , _mm_slli_epi64 (tmp , 23));
    tmp = _mm_xor_si128 (tmp , _mm_srli_epi64 (tmp , 17));
    tmp = _mm_xor_si128 (tmp , _mm_slli_epi64 (tmp , 45));
    return tmp;
}

uint64_t fast_rand () 
{
    static __m128i state = {}; 
    state = xorshift128 (state);
    return _mm_extract_epi64 (state , 0);
}
```
### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ —Ç–∞–∫—Ç–æ–≤ —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –æ–¥–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:

| –ó–∞–ø—É—Å–∫ | –ö–æ–ª-–≤–æ —Ç–∞–∫—Ç–æ–≤ |
|--------|----------------|
| 1      | 208666562      |
| 2      | 208010720      |
| 3      | 200199974      |
| 4      | 258247000      |
| 5      | 203739568      |
| 6      | 209468782      |
| 7      | 205696570      |
| 8      | 240017574      |
| 9      | 213587434      |
| 10     | 220872518      |
| 11     | 217337036      |
| 12     | 209522856      |

**–°—Ä–µ–¥–Ω–µ–µ:** 216 280 549.5—Ç–∞–∫—Ç–æ–≤

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:** ¬±16 732 021.2 —Ç–∞–∫—Ç–æ–≤


–ó–∞–ø—É—Å—Ç–∏–º —Ç–µ–ø–µ—Ä—å —ç—Ç—É –≤–µ—Ä—Å–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π rand() –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–º:
![Github](https://github.com/Arseny-Dernovich/Hash_Table/blob/main/Photos_for_README/hash_1.png)
–ö–∞–∫ –≤–∏–¥–∏–º , –æ–ø—Ç–∏–º–∏–∑–∏—Ü–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ rand() –ø–æ–º–æ–≥–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ 22%.

–ü—Ä–æ–¥–æ–ª–∂–∏–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–∞–ª—å—à–µ , –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≥–æ—Ä—è—á–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å *HashTable_Insert*.
<details>
<summary>  –ö–æ–¥ —Ñ-–∏–∏ –≤—Å—Ç–∞–≤–∫–∏ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—É  </summary>
  
```c
void HashTable_Insert (HashTable* table  , const char* key)
{
    my_assert (table == NULL);
    my_assert (key == NULL);

    uint64_t hash = Hash_djb2 (key);
    size_t index = hash % table->size;

    ListNode* node = table->buckets[index];

    
    while (node) {
        if (strcmp (node->key  , key) == 0) {
            return; 
        }
        node = node->next;
    }

    // –í—Å—Ç–∞–≤–∫–∞ –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞
    ListNode* new_node = (ListNode*)calloc (sizeof (ListNode)  , 1);
    new_node->key = strdup (key);
    new_node->next = table->buckets[index];
    table->buckets[index] = new_node;

    table->count++;
    VERIFY_TABLE(table);
}
```
</details>

–í –Ω–µ–π –Ω–∞–∏–±–æ–ª–µ–µ –≥–æ—Ä—è—á–µ–π —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Ö—ç—à-—Å—É–º–º—ã –¥–ª—è –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö —Å–ª–æ–≤ Hash_djb2() , –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π , –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ–π.

```c
uint64_t Hash_djb2 (const char* str)
{
    my_assert (str == NULL);

    uint64_t hash = 5381;       
    int c = 0;

    while ( (c = *str++)) {
        hash = ( (hash << 5) + hash) + c; // hash * 33 + c
    }

    return hash;
}
```
–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å—Å—á—ë—Ç–∞ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ , –ø–µ—Ä–µ–ø–∏—Å–∞–≤ –µ—ë –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä –≤ —Ñ–∞–π–ª–µ hash.asm , –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–ª–∏–Ω–∫—É–µ–º –µ–≥–æ –∏ —Å–∏-—à–Ω—ã–π —Ñ–∞–π–ª –≤–º–µ—Å—Ç–µ.

<details>
<summary>  –ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ-–∏–∏ —Ä–∞—Å—á—ë—Ç–∞ —Ö—ç—à-—Å—É–º–º—ã  </summary>
  
```
  section .text
    global crc32_hash
    default rel

; uint32_t crc32_hash(const char* data)
; rdi = data (const char*)
; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç CRC32 —Ö–µ—à —Å—Ç—Ä–æ–∫–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–µ–π—Å—è –Ω–∞ \0
; –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ 4 –±–∞–π—Ç–∞, –ø–æ—Ç–æ–º —Ö–≤–æ—Å—Ç –ø–æ 1 –±–∞–π—Ç—É

crc32_hash:
   
    push    rdi             ; —Å–æ—Ö—Ä–∞–Ω—è–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏
    call    strlen_32       ; rax = –¥–ª–∏–Ω–∞
    mov     rsi, rax        ; rsi = len
    pop     rdi             ; rdi = —Å—Ç—Ä–æ–∫–∞ —Å–Ω–æ–≤–∞

    ; === –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è CRC ===
    xor     eax, eax        ; eax = 0
    not     eax             ; eax = 0xFFFFFFFF

    test    rsi, rsi
    jz      .done

    ; === –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ 4 –±–∞–π—Ç–∞ ===
.loop4:

    cmp     rsi, 4
    jb      .tail           ; –µ—Å–ª–∏ –º–µ–Ω—å—à–µ 4 –±–∞–π—Ç, –∏–¥—ë–º –Ω–∞ —Ö–≤–æ—Å—Ç
    mov     edx, dword [rdi] ; –∑–∞–≥—Ä—É–∂–∞–µ–º 4 –±–∞–π—Ç–∞ –≤ edx
    crc32   eax, edx
    add     rdi, 4
    sub     rsi, 4
    jmp     .loop4

.tail:

    test    rsi, rsi
    jz      .done

.loop1:

    movzx   ecx, byte [rdi]
    crc32   eax, ecx
    inc     rdi
    dec     rsi
    jnz     .loop1

.done:
    ret

; ---------------------------------------------
; uint64_t strlen_32(const char* str)
; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ –≤ RAX
; RDI = str
strlen_32:
    xor     rax, rax        ; –¥–ª–∏–Ω–∞ = 0

.len_loop:
    cmp     byte [rdi + rax], 0
    je      .len_done
    inc     rax
    cmp     rax, 32
    jb      .len_loop

.len_done:
    ret
```
</details>


### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ —Ç–∞–∫—Ç–æ–≤ —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å –¥–≤—É–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏:

| –ó–∞–ø—É—Å–∫ | –ö–æ–ª-–≤–æ —Ç–∞–∫—Ç–æ–≤ |
|--------|----------------|
| 1      | 207816528      |
| 2      | 203936812      |
| 3      | 204021032      |
| 4      | 204482054      |
| 5      | 207328686      |
| 6      | 206216692      |
| 7      | 203366198      |
| 8      | 203334650      |
| 9      | 208038030      |
| 10     | 204802322      |
| 11     | 200873522      |

**–°—Ä–µ–¥–Ω–µ–µ:** 204,928,775 —Ç–∞–∫—Ç–æ–≤  

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:** ¬±2,107,915 —Ç–∞–∫—Ç–æ–≤


–ó–∞–ø—É—Å—Ç–∏–º —Ç–µ–ø–µ—Ä—å —ç—Ç—É –≤–µ—Ä—Å–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –¥–≤—É–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–º:
![Github](https://github.com/Arseny-Dernovich/Hash_Table/blob/main/Photos_for_README/hash_2.png)

–ö–∞–∫ –≤–∏–¥–Ω–æ  , —Ç–µ–ø–µ—Ä—å –Ω–∞–∏–±–æ–ª–µ–µ –≥–æ—Ä—è—á–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π —è–≤–ª—è–µ—Ç—Å—è  *strcmp*. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –µ—ë , –ø–µ—Ä–µ–ø–∏—Å–∞–≤ –Ω–∞ inline assembly , —É—á–∏—Ç—ã–≤–∞—è —Ç–æ—Ç —Ñ–∞–∫—Ç , —á—Ç–æ —É –º–µ–Ω—è –≤—Å–µ —Å–ª–æ–≤–∞ –º–µ–Ω—å—à–µ 32 —Å–∏–º–≤–æ–ª–æ–≤ , —è –º–æ–≥—É –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ YMM , —Å –ø–æ–º–æ—â—å—é –∫–æ(https://github.com/Arseny-Dernovich/Hash_Table/blob/main/hash_2.png—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ 4 –±—É–∫–≤—ã –∑–∞ —Ä–∞–∑.
```c
int fast_strcmp (const char* str1 , const char* str2)
{
    int result = 0;

    
    __asm__ __volatile__ (

        ".intel_syntax noprefix \n\t"  
        
        "vmovdqu   ymm0 , [rdi]         \n\t"  
        "vmovdqu   ymm1 , [rsi]         \n\t"  
        
        "vpxor     ymm2 , ymm0 , ymm1    \n\t"  
        
        "vptest    ymm2 , ymm2          \n\t"  
        "jz        equal               \n\t"
        
        "mov       eax , 1              \n\t"
        
        "jmp       end                 \n\t"

        "equal:                        \n\t"
        
        "mov       eax , 0              \n\t"
        "end:                          \n\t"

        ".att_syntax noprefix \n\t"    
        : "=a" (result)               // Output: —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (0 –∏–ª–∏ 1)
        : "D" (str1) , "S" (str2)      // Inputs: str1 –≤ rdi , str2 –≤ rsi
        : "ymm0" , "ymm1" , "ymm2"      
    );

    return result;
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–º–µ—Ä–æ–≤ —Ç–∞–∫—Ç–æ–≤ —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü–µ —Å —Ç—Ä–µ–º—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏:

| –ó–∞–ø—É—Å–∫ | –ö–æ–ª-–≤–æ —Ç–∞–∫—Ç–æ–≤ |
|--------|----------------|
| 1      | 191581220      |
| 2      | 195384737      |
| 3      | 194764904      |
| 4      | 194420034      |
| 5      | 191981812      |
| 6      | 198269760      |
| 7      | 197323940      |
| 8      | 196987002      |
| 9      | 201919636      |
| 10     | 196130920      |

**–°—Ä–µ–¥–Ω–µ–µ:** 195,876,397 —Ç–∞–∫—Ç–æ–≤  

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:** ¬±2,878,489 —Ç–∞–∫—Ç–æ–≤

## –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Ä–µ—É–∑–ª—å—Ç–∞—Ç–æ–≤ 
–Ø –ø—Ä–æ–≤–µ–ª —Ç—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–≤–æ–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã ,—Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –≤—Å—Ç–∞–≤–∫–æ–π –≤ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—É –∏ –ø–æ–∏—Å–∫–æ–º –ø–æ –Ω–µ–π: 

1) –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ rand() —Å –ø–æ–º–æ—â—å—é –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π AVX2.

2) –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–∞ —Ö—ç—à-—Å—É–º–º—ã , –ø—É—Ç—ë–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –µ—ë –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä NASM.

3) –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ strcmp , –ø—É—Ç—ë–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –µ—ë —Å –ø–æ–º–æ—â—å—é inline assembly.

–í –∏—Ç–æ–≥–µ —ç—Ç–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —è –ø–æ–ª—É—á–∏–ª —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 29%.   

–û–¥–Ω–∞–∫–æ, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å —ç—Ç–∏–º –º—ã —É—Ö—É–¥—à–∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ –º–∞—à–∏–Ω–∞—Ö, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö AVX2 - –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–æ–≤, –æ–Ω–∞ –±—É–¥–µ—Ç –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º gcc - –∏–∑-–∑–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫. –ü–æ—ç—Ç–æ–º—É –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –≥–æ—Ä—è—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –≤—ã–∏–≥—Ä—ã—à –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–∫—É–ø–∞–ª –∑–∞—Ç—Ä–∞—Ç—ã –≤ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç–∏.









